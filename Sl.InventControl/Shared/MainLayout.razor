@using MudBlazor;
@inherits LayoutComponentBase

<PageTitle>Sl.InventControl</PageTitle>
<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="@Theme"></MudThemeProvider>
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    
    <MudAppBar Color="Color.Dark" Fixed="true" Elevation="0">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />   
        <MudCardHeader>InventControl</MudCardHeader>
        <MudSpacer />
        <LoginDisplay />
        <MudIconButton Icon="@Icons.Material.Filled.LightMode" OnClick="@((e) => ToggleDarkmode())"></MudIconButton>
    </MudAppBar>    
    
    <MudDrawer @bind-Open="@_drawerOpen" DisableOverlay="true" Variant="@DrawerVariant.Persistent">
        <MudDrawerHeader>
            <MudText Typo="Typo.h6">Menu</MudText>
        </MudDrawerHeader>

        <NavMenu />
    </MudDrawer>

    <MudMainContent>       
        <article class="content px-4">
            
            @Body
        </article>
    </MudMainContent>
</MudLayout>

@code {
    public MudTheme Theme = new() {
            Palette = new PaletteLight {
                Primary = Colors.BlueGrey.Darken1
            },
            PaletteDark = new PaletteDark {
                Background = Colors.Grey.Darken4,
                DrawerBackground = Colors.Grey.Darken4,
                AppbarBackground = Colors.Grey.Darken4,
                Primary = Colors.Grey.Lighten4
            }

        };

    private bool _isDarkMode = true;

    bool _drawerOpen = true;

    void ToggleDarkmode() {
        if (_isDarkMode) {
            _isDarkMode = false;
        } else {
            _isDarkMode = true;
        }

    }
    void DrawerToggle() {
        _drawerOpen = !_drawerOpen;
    }
}